# 🏆 PER 기반 순위 시스템 사용 가이드

이 가이드는 발음 평가 결과를 기반으로 한 순위 시스템 사용법을 설명합니다.

## 📋 개요

- **PER (Phoneme Error Rate)**: 음소 오류율 - 낮을수록 발음이 정확합니다
- **순위 매기기**: PER이 낮은 순서대로 1등부터 순위가 매겨집니다
- **자동 업데이트**: Demo 실행 후 자동으로 순위가 업데이트됩니다

## 🚀 사용 방법

### 1. 발음 평가 실행 (Demo)

```bash
# 참가자 모드로 데모 실행
python -m LopeScript.Demo.demo \
    --mode participant \
    --checkpoint path/to/checkpoint.pth \
    --phoneme_map data/phoneme_to_id.json \
    --audio 김예원.wav
```

데모를 실행하면:
1. 발음 평가 결과가 출력됩니다
2. `results/` 폴더에 결과 파일이 저장됩니다 (예: `김예원_20231127_153045.json`)
3. 자동으로 순위가 업데이트되고 `results/rankings.json`에 저장됩니다
4. 순위표가 콘솔에 표시됩니다

### 2. 순위 확인

#### 방법 1: Demo 실행 시 자동 표시
Demo를 실행하면 결과 저장 후 자동으로 순위표가 표시됩니다.

#### 방법 2: 순위만 다시 보기
```bash
python rank.py --display_only
```

#### 방법 3: 순위 재계산 및 업데이트
```bash
python rank.py
```

### 3. 순위표 예시

```
================================================================================
                       🏆 PRONUNCIATION RANKINGS 🏆
================================================================================
Rank   Participant               PER        Rating               Date                
--------------------------------------------------------------------------------
🥇 1   김예원.wav                 5.23%     Excellent! 🌟🌟🌟      2023-11-27          
🥈 2   이동현.wav                 12.45%    Good! 🌟🌟            2023-11-27          
🥉 3   송민주.wav                 18.90%    Fair 🌟               2023-11-27          
   4   채은지.wav                 28.34%    Needs improvement    2023-11-27          
================================================================================
Total participants: 4
================================================================================
```

## 📁 파일 구조

```
pronunciation_assessment/
├── rank.py                          # 순위 시스템 메인 파일
├── RANKING_GUIDE.md                 # 이 가이드 문서
├── LopeScript/Demo/demo.py         # 발음 평가 데모 (순위 자동 업데이트 통합)
├── recording/                       # 오디오 파일들
│   ├── 김예원.wav
│   ├── 이동현.wav
│   └── ...
└── results/                         # 결과 저장 폴더
    ├── 김예원_20231127_153045.json  # 개별 결과 파일들
    ├── 이동현_20231127_153102.json
    └── rankings.json                # 통합 순위 파일
```

## 💡 팁

1. **여러 번 녹음하기**: 같은 참가자가 여러 번 녹음할 수 있습니다. 각 녹음마다 별도의 결과 파일이 생성되고 모두 순위에 포함됩니다.

2. **최고 기록 찾기**: 여러 번 녹음한 경우, 순위표에서 가장 낮은 PER을 가진 녹음이 해당 참가자의 최고 기록입니다.

3. **결과 백업**: `results/` 폴더를 정기적으로 백업하면 모든 평가 기록을 보관할 수 있습니다.

---

궁금한 점이 있으시면 프로젝트 문서를 참고하거나 이슈를 등록해주세요!
